[
    {rabbit, [
        {auth_backends, [rabbit_auth_backend_ldap, rabbit_auth_backend_internal]}
        ]},

    {rabbitmq_auth_backend_ldap, [
        {servers, ["10.1.1.1"]},
        {port, 636},
	      {use_ssl,     true},
        {ssl_options, [{cacertfile, "/etc/rabbitmq/certs/myca.crt"},
                {certfile,   "/etc/rabbitmq/certs/myserver.crt"},
                {keyfile,    "/etc/rabbitmq/certs/myserver.key"},
                %% Disables peer certificate chain verification.
                %%
                %% Doing so loses one of the key benefits of TLS and make the setup less secure
                %% but also significantly simplifies node configuration.
                {verify, verify_none}
                %%{server_name_indication, "ldap.identity.eng.megacorp.local"},
                %%{ssl_hostname_verification, wildcard}
        ]},
        {user_dn_pattern, "uid=${username},ou=People,dc=example,dc=com"},
        {tag_queries, [
            {administrator, {constant, true}},
            {management, {constant, true}}
        ]},
        {log, network}
    ]}

].
