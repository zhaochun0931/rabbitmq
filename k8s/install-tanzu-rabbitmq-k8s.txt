# install helm



✅ 
kubectl create ns rabbitmq-system



export USERNAME=
export PASSWORD=

✅
helm registry login rabbitmq-helmoci.packages.broadcom.com \
--username=$USERNAME \
--password=$PASSWORD




✅
kubectl create secret docker-registry tanzu-rabbitmq-registry-creds \
--docker-server "rabbitmq-operator.packages.broadcom.com" \
--docker-username $USERNAME \
--docker-password $PASSWORD \
-n rabbitmq-system



✅
kubectl create secret docker-registry my-secret \
--docker-server "rabbitmq.packages.broadcom.com" \
--docker-username $USERNAME \
--docker-password $PASSWORD \
-n rabbitmq-system



✅
kubectl delete secret tanzu-rabbitmq-registry-creds -n rabbitmq-system
kubectl delete secret my-secret -n rabbitmq-system






✅
kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.5.3/cert-manager.yaml


✅ install operator

✅
helm install tanzu-rabbitmq oci://rabbitmq-helmoci.packages.broadcom.com/tanzu-rabbitmq-operators \
--namespace rabbitmq-system




✅
kubectl get all -n rabbitmq-system

# kubectl get all -n rabbitmq-system
NAME                                               READY   STATUS    RESTARTS   AGE
pod/messaging-topology-operator-568cc68f98-h2dgt   1/1     Running   0          47s
pod/rabbitmq-cluster-operator-685fcdfdc-lhf85      1/1     Running   0          47s

NAME                                          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE
service/messaging-topology-operator-webhook   ClusterIP   10.110.241.143   <none>        443/TCP   47s

NAME                                          READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/messaging-topology-operator   1/1     1            1           47s
deployment.apps/rabbitmq-cluster-operator     1/1     1            1           47s

NAME                                                     DESIRED   CURRENT   READY   AGE
replicaset.apps/messaging-topology-operator-568cc68f98   1         1         1       47s
replicaset.apps/rabbitmq-cluster-operator-685fcdfdc      1         1         1       47s
#




✅
helm list --namespace rabbitmq-system


# helm list --namespace rabbitmq-system
NAME          	NAMESPACE      	REVISION	UPDATED                                	STATUS  	CHART                         	APP VERSION
tanzu-rabbitmq	rabbitmq-system	1       	2025-11-04 23:54:47.779642674 +0000 UTC	deployed	tanzu-rabbitmq-operators-4.2.0	4.2.0
#




kubectl logs -n rabbitmq-system deploy/rabbitmq-cluster-operator
kubectl logs -n rabbitmq-system deploy/messaging-topology-operator



# create the rabbitmq cluster 


kubectl apply -f rabbitmq.yaml




# kubectl get pods -A
NAMESPACE            NAME                                           READY   STATUS    RESTARTS   AGE
cert-manager         cert-manager-55cfd7fc65-56r25                  1/1     Running   0          5m2s
cert-manager         cert-manager-cainjector-565db4fc78-pww9c       1/1     Running   0          5m2s
cert-manager         cert-manager-webhook-7597b888df-vmnb7          1/1     Running   0          5m2s
kube-system          calico-kube-controllers-77969b7d87-xh4gg       1/1     Running   0          11m
kube-system          calico-node-2zgwb                              1/1     Running   0          11m
kube-system          coredns-668d6bf9bc-8qskj                       1/1     Running   0          11m
kube-system          coredns-668d6bf9bc-fxplw                       1/1     Running   0          11m
kube-system          etcd-test                                      1/1     Running   0          11m
kube-system          kube-apiserver-test                            1/1     Running   0          11m
kube-system          kube-controller-manager-test                   1/1     Running   0          11m
kube-system          kube-proxy-ll9lm                               1/1     Running   0          11m
kube-system          kube-scheduler-test                            1/1     Running   0          11m
local-path-storage   local-path-provisioner-7d6dddf9dd-7srx9        1/1     Running   0          11m
rabbitmq-system      messaging-topology-operator-568cc68f98-cj9pp   1/1     Running   0          4m18s
rabbitmq-system      rabbitmq-cluster-operator-685fcdfdc-bbbzp      1/1     Running   0          4m18s
rabbitmq-system      rabbitmq1-server-0                             1/1     Running   0          2m33s
#







✅ rabbitmq1:

username="$(kubectl get secret rabbitmq1-default-user -n rabbitmq-system -o jsonpath='{.data.username}' | base64 --decode)"
password="$(kubectl get secret rabbitmq1-default-user -n rabbitmq-system -o jsonpath='{.data.password}' | base64 --decode)"


echo -e "username: \t $username"
echo -e "password: \t $password"




nohup kubectl port-forward service/rabbitmq1 -n rabbitmq-system --address 0.0.0.0 15672 5672 5552 &




