openssl genrsa -out ca.key 2048


openssl req -x509 -new -nodes -key ca.key \
  -subj "/CN=demo-ca" \
  -days 3650 \
  -out ca.crt






  
openssl genrsa -out server.key 2048

openssl req -new -key server.key -out server.csr -config openssl-server.cnf

openssl x509 -req -in server.csr \
  -CA ca.crt -CAkey ca.key -CAcreateserial \
  -out server.crt -days 365 \
  -extfile openssl-server.cnf \
  -extensions req_ext






openssl genrsa -out client.key 2048

openssl req -new -key client.key -out client.csr -config openssl-client.cnf

openssl x509 -req -in client.csr \
  -CA ca.crt -CAkey ca.key -CAcreateserial \
  -out client.crt -days 365 \
  -extfile openssl-client.cnf \
  -extensions req_ext




openssl x509 -in server.crt -text -noout | grep -A2 "Extended Key Usage"


openssl x509 -in client.crt -text -noout | grep -A2 "Extended Key Usage"






docker compose build --no-cache
docker compose up
